(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))I(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const b of a.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&I(b)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function I(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();let c;const k=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&k.decode();let w=null;function T(){return(w===null||w.byteLength===0)&&(w=new Uint8Array(c.memory.buffer)),w}function j(A,t){return A=A>>>0,k.decode(T().subarray(A,A+t))}function Z(A,t,e,I,n,a,b,L){c.generate_fractal(A,t,e,I,n,a,b,L)}const J=Object.freeze({Mandelbrot:0,0:"Mandelbrot",Julia:1,1:"Julia"});async function x(A,t){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,t)}catch(I){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",I);else throw I}const e=await A.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(A,t);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function H(){const A={};return A.wbg={},A.wbg.__wbindgen_init_externref_table=function(){const t=c.__wbindgen_export_0,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)},A.wbg.__wbindgen_throw=function(t,e){throw new Error(j(t,e))},A}function O(A,t){return c=A.exports,X.__wbindgen_wasm_module=t,w=null,c.__wbindgen_start(),c}async function X(A){if(c!==void 0)return c;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof A>"u"&&(A=new URL("data:application/wasm;base64,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",import.meta.url));const t=H();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));const{instance:e,module:I}=await x(await A,t);return O(e,I)}const i=document.getElementById("selection"),g=i.getContext("2d");if(!g)throw new Error("Failed to get 2D context for map selection canvas");g.setLineDash([10,5]);g.fillStyle="#cb0332";g.strokeStyle="#0079ff";let s=0,o=0,l=i.width,E=i.height,y=i.width*2.3/3,M=i.height/2,r=-2.3,C=.7,B=1.5,f=-1.5;g.beginPath();g.arc(y,M,4,0,Math.PI*2);g.fill();i.addEventListener("pointerdown",A=>{A.ctrlKey?(y=A.offsetX,M=A.offsetY,g.clearRect(0,0,i.width,i.height),g.beginPath(),g.arc(y,M,4,0,Math.PI*2),g.fill()):(s=A.offsetX,o=A.offsetY)});i.addEventListener("pointermove",A=>{A.pressure!=0&&(g.clearRect(0,0,i.width,i.height),A.ctrlKey?(y=A.offsetX,M=A.offsetY,g.beginPath(),g.arc(y,M,4,0,Math.PI*2),g.fill()):(Math.abs(s-A.offsetX)>Math.abs(o-A.offsetY)?(l=A.offsetX,E=o+Math.abs(s-A.offsetX)*Math.sign(A.offsetY-o)):(l=s+Math.abs(o-A.offsetY)*Math.sign(A.offsetX-s),E=A.offsetY),g.strokeRect(s,o,l-s,E-o)))});i.addEventListener("pointerup",A=>{A.ctrlKey?z():Math.sqrt((A.offsetX-s)**2+(A.offsetY-o)**2)<10&&(s=o=l=E=0,g.clearRect(0,0,i.width,i.height))});function S(){return[r,C,B,f]}function v(){return[y/i.width*(C-r)+r,M/i.height*(f-B)+B]}function V(){let A=Math.min(s,l)/i.width*(C-r)+r,t=Math.max(s,l)/i.width*(C-r)+r,e=Math.min(o,E)/i.height*(f-B)+B,I=Math.max(o,E)/i.height*(f-B)+B;r=A,C=t,B=e,f=I,s=o=0,l=E=i.width,g==null||g.clearRect(0,0,i.width,i.height)}function q(){r=-2.3,C=.7,B=1.5,f=-1.5,s=o=l=E=0}const U=await X(),W=new Uint8Array(U.memory.buffer),m=U.get_output_buffer_pointer(),Q=document.getElementById("map"),u=Q.getContext("2d");if(!u)throw new Error("Failed to get 2D context for map canvas");const D=u.createImageData(Q.width,Q.width),d=document.getElementById("result"),G=d.getContext("2d",{alpha:!1});if(!G)throw new Error("Failed to get 2D context for result canvas");const Y=G.createImageData(d.width,d.height);function h(){let[A,t,e,I]=S();Z(A,t,e,I,0,0,Q.width,J.Mandelbrot);const n=W.slice(m,m+Q.width*Q.height*4);D.data.set(n),u==null||u.putImageData(D,0,0)}function z(){let[A,t]=v();Z(-2,2,-2,2,A,t,d.width,J.Julia);const e=W.slice(m,m+d.width*d.height*4);Y.data.set(e),G==null||G.putImageData(Y,0,0)}var N;(N=document.getElementById("zoom"))==null||N.addEventListener("click",()=>{V(),h()});var p;(p=document.getElementById("reset"))==null||p.addEventListener("click",()=>{q(),h()});var R;(R=document.getElementById("save_mandelbrot"))==null||R.addEventListener("click",()=>{let A=Q.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=A});var F;(F=document.getElementById("save_julia"))==null||F.addEventListener("click",()=>{let A=d.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=A});h();z();
